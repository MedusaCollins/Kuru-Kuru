<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuru Kuru~!</title>
    <link rel="icon" href="/src/img/hertaa.gif" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
      <style>  

        /* Set a higher z-index for the .test container */
        .visiblity {
          z-index: 0; /* Change this to -1 */
        }

            /* The modal overlay */
    .modal-overlay {
      /* Position the overlay */
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent black */
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
      </style>
</head>
<body class="w-full h-full m-0 overflow-hidden bg-red-100" id="body">
        <div class="w-full h-full -mt-12 flex justify-center text-center mx-2 fixed items-center visibility">
            <div class="relative p-4 flex-col mx-auto my-auto" id="textColor">
              <h1 class=" flex items-center justify-center">
                Welcome to herta kuru~
                <img src="/src/img/hertaa.gif" alt="" class="w-12" id="settings">
              </h1>
              <h2 class=" gap-1 z-10 ">Head empty, just squish the kuru~</h2>
              <h3 class=" my-5 z-10" id="greeting">The kuru~ has been squished</h3>
              <div class="text-3xl font-bold my-5" id="counter">0</div>
              <button class=" btn px-5 py-2 rounded bg-[#c9ada7] hover:bg-[#fca311] hover:text-white transition-colors z-10" id="changeTextBtn">kuru kuru~!</button>
            </div>

            <div id="myModal" class="modal-overlay hidden" onclick="closeModal()">
              <div class="bg-white p-8 rounded shadow-lg grid grid-col-2" onclick="event.stopPropagation();">
                <p id="modalText" class="text-xl mb-4"><strong>Options</strong></p>
                <table class="table-auto text-center sm:text-left border-separate">
                    <tr>
                      <td><input type="text" class="border" id="backgroundInput" placeholder="Background Color"></td>
                    </tr>
                    <tr>
                      <td><input type="text" class="border" id="textInput" placeholder="Text Color" ></td>
                    </tr>
                  </table>
                  <p id="modalText" class="text-xl mt-4">Button</p>
                  <table class="table-auto text-center sm:text-left border-separate">
                    <tr>
                      <td><input type="text" class="border" id="buttonInput" placeholder="Button Color" ></td>
                    </tr>
                    <tr>
                      <td><input type="text" class="border" id="buttonTextInput" placeholder="Button Text Color" ></td>
                    </tr>
                    <tr>
                      <td><input type="text" class="border" id="hoverButtonInput" placeholder="Button Hover Color"></td>
                    </tr>
                    <tr>
                      <td><input type="text" class="border" id="hoverButtonTextInput" placeholder="Button Hover Text Color"></td>
                    </tr>
                  </table>
                <div class="flex gap-5 items-center justify-center mt-5">
                  <button class="bg-gray-500 hover:bg-gray-600 text-white px-5 py-3 rounded font-semibold" onclick="closeModal()">CLOSE</button>
                </div>
              </div>
            </div>
    <script>
      // Get the button element and the h1 element
      const changeTextBtn = document.getElementById("changeTextBtn");
      const greetingElement = document.getElementById("greeting");
      const settings = document.getElementById("settings") ;
      const settingsMenu = document.getElementById("myModal");
      const counterDiv = document.getElementById("counter");
      var newGreeting = "";
      var counter = 0;


      function applyStyles() {
      // Stil değişikliklerini uygulayacak elementi seçin
      const body = document.getElementById('body');
      const textcolor = document.getElementById('textColor');

      // Değerleri hedef elementin stil özelliklerine atayın
      body.style.backgroundColor = document.getElementById('backgroundInput').value;
      textcolor.style.color = document.getElementById('textInput').value;
      changeTextBtn.style.backgroundColor = document.getElementById('buttonInput').value;
      changeTextBtn.style.color = document.getElementById('buttonTextInput').value;
      }

        changeTextBtn.addEventListener('mouseout', function () {
        this.style.backgroundColor = document.getElementById('buttonInput').value;
        this.style.color = document.getElementById('buttonTextInput').value;
        });

        // Hover
        changeTextBtn.addEventListener('mouseover', function () {
        this.style.backgroundColor = document.getElementById('hoverButtonInput').value;
        this.style.color = document.getElementById('hoverButtonTextInput').value;
        });
  
        settings.addEventListener("click", () => {
          settingsMenu.style.display ='flex';
        })
        function closeModal(){
          settingsMenu.style.display ='none';
        }
        changeTextBtn.addEventListener("click", () => {
        changeGreetingText();
            const randomSongNumber = Math.floor(Math.random() * 3) + 1;
            const audio = new Audio(`/src/${randomSongNumber}.mp3`);
            audio.play();
            startMoving();
            count();
        });
        function count(){
            counter++;
            counterDiv.textContent = counter;
            localStorage.setItem('clicked', counter);
          }
        function changeGreetingText() {
            const randomInRange = Math.random() * 2 + 1;
        // Prompt the user for a new greeting
        if(randomInRange > 2){
            newGreeting = "The kuru~ has been squished for";
            direction = true;
        }else{
            newGreeting = "Herta has been kuru~ed for";
            direction = false;
        }

        // Update the text content of the h1 element with the new greeting
        greetingElement.textContent = newGreeting;
        }

        var direction;
        var gifList = []; // Bu dizi, her GIF için yön bilgisini saklayacak
        function startMoving() {
  const gifImage = new Image();
  gifImage.src = "/src/img/hertaa.gif"; // Replace with the actual path to your GIF image

  gifImage.style.position = "absolute";
  gifImage.className = "animate-bounce";
  gifImage.style.zIndex = "0"; // Set the z-index to 0 for the gif
  gifImage.style.bottom = "-140px";

  const screenWidth = window.innerWidth;
  const gifWidth = 200; // Replace with the actual width of your GIF

  let position;

  // Determine the initial position based on the 'direction' variable
  if (direction) {
    // Move from right to left
    position = screenWidth;
    gifImage.style.left = position + "px";
  } else {
    // Move from left to right
    position = -gifWidth;
    gifImage.style.left = position + "px";
  }

  // Append the image to the .visibility element
  document.querySelector(".visibility").appendChild(gifImage);

  // Function to move the image
  function moveImage() {
    if (direction) {
      position -= 5; // Move 5 pixels to the left

      // If the image is off-screen, remove it
      if (position+100 < -gifWidth) {
        gifImage.remove();
        clearInterval(intervalId); // Stop the interval
      } else {
        gifImage.style.left = position + "px"; // Set the new position
      }
    } else {
      position += 5; // Move 5 pixels to the right

      // If the image is off-screen, remove it
      if (position > screenWidth) {
        gifImage.remove();
        clearInterval(intervalId); // Stop the interval
      } else {
        gifImage.style.left = position + "px"; // Set the new position
      }
    }
  }

  // Hareketi başlat
  const intervalId = setInterval(moveImage, 2); // Interval hızını isteğe bağlı olarak ayarlayabilirsiniz
}

  // İlgili input elementlerine "input" event dinleyicileri ekleyin
  document.getElementById('backgroundInput').addEventListener('input', applyStyles);
  document.getElementById('textInput').addEventListener('input', applyStyles);
  document.getElementById('buttonInput').addEventListener('input', applyStyles);
  document.getElementById('buttonTextInput').addEventListener('input', applyStyles);

          document.addEventListener('DOMContentLoaded', () =>{
            counter = localStorage.getItem('clicked')
            counterDiv.textContent = counter;
          })
        </script>
</body>
</html>